# NATS Server Configuration for IoT Smart Irrigation
server_name: "iot-smart-irrigation-nats"

# Client port
port: 4222

# HTTP monitoring port
http_port: 8222

# JetStream configuration for message persistence
jetstream {
  store_dir: "/data/jetstream"
  max_memory_store: 1GB
  max_file_store: 10GB
}

# MQTT configuration
mqtt {
  port: 1884
  # Maximum time to wait for ACK from MQTT QoS 1 subscriber
  ack_wait: "30s"
  # Maximum number of pending ACKs for MQTT QoS 1 subscriber
  max_ack_pending: 100
}

# Clustering configuration
cluster {
  name: "iot-cluster"
  port: 6222
}

# Logging configuration
log_file: "/tmp/nats.log"
logtime: true
debug: false
trace: false

# Connection limits
max_connections: 1000
max_payload: 1MB

# Authentication (optional - can be enabled later)
accounts {
  SYS: {
    users: [{user: "sys", password: "sys"}]
  }
  IOT: {
    users: [
      {user: "iot_device", password: "device_secret"}
      {user: "iot_service", password: "service_secret"}
    ]
  }
}

# System account (required for monitoring)
system_account: SYS

# Ping interval
ping_interval: "2m"
ping_max: 3

# Write deadline
write_deadline: "10s"